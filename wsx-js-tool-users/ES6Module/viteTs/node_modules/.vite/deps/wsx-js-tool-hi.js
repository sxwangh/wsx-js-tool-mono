import {
  __commonJS
} from "./chunk-RSJERJUL.js";

// node_modules/.pnpm/wsx-js-tool-hi@1.2.5/node_modules/wsx-js-tool-hi/dist/wsx-js-tool.min.js
var require_wsx_js_tool_min = __commonJS({
  "node_modules/.pnpm/wsx-js-tool-hi@1.2.5/node_modules/wsx-js-tool-hi/dist/wsx-js-tool.min.js"(exports, module) {
    (function webpackUniversalModuleDefinition(root, factory) {
      if (typeof exports === "object" && typeof module === "object")
        module.exports = factory();
      else if (typeof define === "function" && define.amd)
        define("anyNameIsOk-amd", [], factory);
      else if (typeof exports === "object")
        exports["anyNameIsOk-common"] = factory();
      else
        root["anyNameIsOk-root"] = factory();
    })(exports, () => {
      return (() => {
        var __webpack_modules__ = [
          ,
          (__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
            "use strict";
            __webpack_require__2.r(__webpack_exports__2);
            __webpack_require__2.d(__webpack_exports__2, {
              "getUrlParamByName": () => getUrlParamByName,
              "trim": () => trim
            });
            function getUrlParamByName(name) {
              let reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
              let r = null;
              if (window.location.href.split("?")[1]) {
                r = window.location.href.split("?")[1].match(reg);
              }
              if (r != null) {
                return decodeURIComponent(r[2]);
              }
              ;
              return null;
            }
            function trim(str) {
              return str.replace(/(^\s*)|(\s*$)/g, "");
            }
          },
          (__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
            "use strict";
            __webpack_require__2.r(__webpack_exports__2);
            __webpack_require__2.d(__webpack_exports__2, {
              "getDaysAgo": () => getDaysAgo,
              "getFormatDate": () => getFormatDate,
              "getToday": () => getToday,
              "toHHmmss": () => toHHmmss
            });
            function getToday(withTime = false) {
              const today = new Date();
              if (!withTime) {
                today.setHours(0);
                today.setMinutes(0);
                today.setSeconds(0);
              }
              today.setMilliseconds(0);
              return today;
            }
            function getDaysAgo(day, withTime = false) {
              const daysAgo = new Date();
              daysAgo.setDate(daysAgo.getDate() - day + 1);
              if (!withTime) {
                daysAgo.setHours(0);
                daysAgo.setMinutes(0);
                daysAgo.setSeconds(0);
              }
              daysAgo.setMilliseconds(0);
              return daysAgo;
            }
            function getFormatDate(date) {
              const newDate = new Date(date);
              const Y = `${newDate.getFullYear()}-`;
              const M = `${newDate.getMonth() + 1 < 10 ? `0${newDate.getMonth() + 1}` : newDate.getMonth() + 1}-`;
              const D = `${newDate.getDate() < 10 ? `0${newDate.getDate()}` : newDate.getDate()} `;
              return `${Y}${M}${D}`;
            }
            function toHHmmss(date) {
              let time;
              const hours = parseInt(date % (1e3 * 60 * 60 * 24) / (1e3 * 60 * 60), 10);
              const minutes = parseInt(date % (1e3 * 60 * 60) / (1e3 * 60), 10);
              const seconds = date % (1e3 * 60) / 1e3;
              time = (hours < 10 ? "0" + hours : hours) + ":" + (minutes < 10 ? "0" + minutes : minutes) + ":" + (seconds < 10 ? "0" + seconds : seconds);
              return time;
            }
          },
          (__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
            "use strict";
            __webpack_require__2.r(__webpack_exports__2);
            __webpack_require__2.d(__webpack_exports__2, {
              "default": () => __WEBPACK_DEFAULT_EXPORT__
            });
            function WebsocketHeart({
              url,
              pingTimeout = 3e4,
              pongTimeout = 4e3,
              reconnectTimeout = 5e3,
              pingMsg = "ping",
              maxReCount = 10
            }) {
              this.opts = {
                url,
                pingTimeout,
                pongTimeout,
                reconnectTimeout,
                pingMsg: JSON.stringify({
                  type: 1,
                  timestamp: new Date().getTime(),
                  data: "ping"
                }),
                maxReCount
              };
              this.ws = null;
              this.curReCount = 0;
              this.onclose = () => {
              };
              this.onerror = () => {
              };
              this.onopen = () => {
              };
              this.onmessage = () => {
              };
              this.onreconnect = () => {
              };
              this.createWebSocket();
            }
            WebsocketHeart.prototype.createWebSocket = function() {
              try {
                this.ws = new WebSocket(this.opts.url);
                this.initHook();
              } catch (e) {
                this.reconnect();
                throw e;
              }
            };
            WebsocketHeart.prototype.initHook = function() {
              this.ws.onclose = () => {
                this.onclose();
                console.log("onClose: \u6267\u884Cthis.reconnect hook");
                this.reconnect();
              };
              this.ws.onerror = () => {
                this.onerror();
                this.reconnect();
              };
              this.ws.onopen = () => {
                this.onopen();
                this.heartCheck();
              };
              this.ws.onmessage = (event) => {
                this.heartCheck();
                this.onmessage(event);
              };
            };
            WebsocketHeart.prototype.reconnect = function() {
              if (this.curReCount >= this.opts.maxReCount) {
                console.log("\u8D85\u8FC7\u6700\u5927\u8FDE\u63A5\u6B21\u6570\uFF0C\u4E0D\u518D\u8FDE\u63A5");
                return;
              }
              if (this.forbidReconnect) {
                console.log("\u624B\u52A8\u5173\u95ED\uFF0C\u7981\u6B62\u91CD\u8FDE");
                return;
              }
              ;
              if (this.lockReconnect) {
                return;
              }
              ;
              this.curReCount += 1;
              console.log(`\u5F53\u524D\u5C1D\u8BD5\u7B2C${this.curReCount}\u6B21\u94FE\u63A5..`);
              this.lockReconnect = true;
              this.onreconnect();
              setTimeout(() => {
                this.createWebSocket();
                this.lockReconnect = false;
              }, this.opts.reconnectTimeout);
            };
            WebsocketHeart.prototype.send = function(msg) {
              this.ws.send(msg);
            };
            WebsocketHeart.prototype.heartCheck = function() {
              this.heartReset();
              this.heartStart();
            };
            WebsocketHeart.prototype.heartStart = function() {
              if (this.forbidReconnect)
                return;
              this.pingTimeoutId = setTimeout(() => {
                this.ws.send(this.opts.pingMsg);
                this.pongTimeoutId = setTimeout(() => {
                  console.log("\u5FC3\u8DF3\u5F02\u5E38\uFF0Cws.close()");
                  this.ws.close();
                }, this.opts.pongTimeout);
              }, this.opts.pingTimeout);
            };
            WebsocketHeart.prototype.heartReset = function() {
              clearTimeout(this.pingTimeoutId);
              clearTimeout(this.pongTimeoutId);
            };
            WebsocketHeart.prototype.close = function() {
              this.forbidReconnect = true;
              this.heartReset();
              this.ws.close();
            };
            if (window)
              window.WebsocketHeart = WebsocketHeart;
            const __WEBPACK_DEFAULT_EXPORT__ = WebsocketHeart;
          },
          (module2) => {
            !function(e, t) {
              true ? module2.exports = t() : 0;
            }(self, function() {
              return (() => {
                "use strict";
                var e = {
                  484: (e2, t2, o2) => {
                    o2.r(t2), o2.d(t2, {
                      default: () => n
                    });
                    const n = {
                      getUrlParamByName: function(e3) {
                        let t3 = new RegExp("(^|&)" + e3 + "=([^&]*)(&|$)", "i"), o3 = null;
                        return window.location.href.split("?")[1] && (o3 = window.location.href.split("?")[1].match(t3)), null != o3 ? decodeURIComponent(o3[2]) : null;
                      },
                      trim: function(e3) {
                        return e3.replace(/(^\s*)|(\s*$)/g, "");
                      },
                      getToday: function(e3 = false) {
                        const t3 = new Date();
                        return e3 || (t3.setHours(0), t3.setMinutes(0), t3.setSeconds(0)), t3.setMilliseconds(0), t3;
                      },
                      getDaysAgo: function(e3, t3 = false) {
                        const o3 = new Date();
                        return o3.setDate(o3.getDate() - e3 + 1), t3 || (o3.setHours(0), o3.setMinutes(0), o3.setSeconds(0)), o3.setMilliseconds(0), o3;
                      },
                      getFormatDate: function(e3) {
                        const t3 = new Date(e3);
                        return `${`${t3.getFullYear()}-`}${`${t3.getMonth() + 1 < 10 ? `0${t3.getMonth() + 1}` : t3.getMonth() + 1}-`}${`${t3.getDate() < 10 ? `0${t3.getDate()}` : t3.getDate()} `}`;
                      }
                    };
                  }
                }, t = {};
                function o(n) {
                  if (t[n])
                    return t[n].exports;
                  var r = t[n] = {
                    exports: {}
                  };
                  return e[n](r, r.exports, o), r.exports;
                }
                return o.d = (e2, t2) => {
                  for (var n in t2)
                    o.o(t2, n) && !o.o(e2, n) && Object.defineProperty(e2, n, {
                      enumerable: true,
                      get: t2[n]
                    });
                }, o.o = (e2, t2) => Object.prototype.hasOwnProperty.call(e2, t2), o.r = (e2) => {
                  "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, {
                    value: "Module"
                  }), Object.defineProperty(e2, "__esModule", {
                    value: true
                  });
                }, o(484);
              })();
            });
          }
        ];
        var __webpack_module_cache__ = {};
        function __webpack_require__(moduleId) {
          var cachedModule = __webpack_module_cache__[moduleId];
          if (cachedModule !== void 0) {
            return cachedModule.exports;
          }
          var module2 = __webpack_module_cache__[moduleId] = {
            exports: {}
          };
          __webpack_modules__[moduleId](module2, module2.exports, __webpack_require__);
          return module2.exports;
        }
        (() => {
          __webpack_require__.n = (module2) => {
            var getter = module2 && module2.__esModule ? () => module2["default"] : () => module2;
            __webpack_require__.d(getter, { a: getter });
            return getter;
          };
        })();
        (() => {
          __webpack_require__.d = (exports2, definition) => {
            for (var key in definition) {
              if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports2, key)) {
                Object.defineProperty(exports2, key, { enumerable: true, get: definition[key] });
              }
            }
          };
        })();
        (() => {
          __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
        })();
        (() => {
          __webpack_require__.r = (exports2) => {
            if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
              Object.defineProperty(exports2, Symbol.toStringTag, { value: "Module" });
            }
            Object.defineProperty(exports2, "__esModule", { value: true });
          };
        })();
        var __webpack_exports__ = {};
        (() => {
          "use strict";
          __webpack_require__.r(__webpack_exports__);
          __webpack_require__.d(__webpack_exports__, {
            "default": () => __WEBPACK_DEFAULT_EXPORT__
          });
          var _tool_commonMethods__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
          var _tool_date__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);
          var _tool_WebsocketHeart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
          var wsx_js_tool_hi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(4);
          var wsx_js_tool_hi__WEBPACK_IMPORTED_MODULE_3___default = __webpack_require__.n(wsx_js_tool_hi__WEBPACK_IMPORTED_MODULE_3__);
          const wsxJsTool = {
            getUrlParamByName: _tool_commonMethods__WEBPACK_IMPORTED_MODULE_0__.getUrlParamByName,
            trim: _tool_commonMethods__WEBPACK_IMPORTED_MODULE_0__.trim,
            getToday: _tool_date__WEBPACK_IMPORTED_MODULE_1__.getToday,
            getDaysAgo: _tool_date__WEBPACK_IMPORTED_MODULE_1__.getDaysAgo,
            getFormatDate: _tool_date__WEBPACK_IMPORTED_MODULE_1__.getFormatDate,
            WebsocketHeart: _tool_WebsocketHeart__WEBPACK_IMPORTED_MODULE_2__["default"]
          };
          const __WEBPACK_DEFAULT_EXPORT__ = wsxJsTool;
          wsx_js_tool_hi__WEBPACK_IMPORTED_MODULE_3___default().getUrlParamByName();
        })();
        __webpack_exports__ = __webpack_exports__["default"];
        return __webpack_exports__;
      })();
    });
  }
});
export default require_wsx_js_tool_min();
//# sourceMappingURL=wsx-js-tool-hi.js.map
